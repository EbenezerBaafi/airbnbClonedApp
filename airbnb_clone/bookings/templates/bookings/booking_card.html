<!-- Booking Card Component - Reusable card for booking list -->
<div class="card shadow-sm mb-3">
    <div class="card-body">
        <div class="row">
            <div class="col-md-3">
                {% if booking.listing.images.all %}
                    <img src="{{ booking.listing.images.first.image.url }}" 
                         alt="{{ booking.listing.title }}"
                         class="img-fluid rounded"
                         style="width: 100%; height: 150px; object-fit: cover;">
                {% else %}
                    <div class="bg-secondary rounded d-flex align-items-center justify-content-center" 
                         style="width: 100%; height: 150px;">
                        <i class="fas fa-home fa-3x text-white"></i>
                    </div>
                {% endif %}
            </div>
            
            <div class="col-md-6">
                <h5 class="card-title">
                    <a href="{% url 'listing_detail' booking.listing.pk %}" 
                       class="text-decoration-none text-dark">
                        {{ booking.listing.title }}
                    </a>
                </h5>
                
                <p class="text-muted mb-2">
                    <i class="fas fa-map-marker-alt"></i>
                    {{ booking.listing.city }}, {{ booking.listing.country }}
                </p>
                
                <p class="mb-1">
                    <i class="fas fa-calendar-check text-success"></i>
                    <strong>Check-in:</strong> {{ booking.check_in|date:"M d, Y" }}
                </p>
                
                <p class="mb-1">
                    <i class="fas fa-calendar-times text-danger"></i>
                    <strong>Check-out:</strong> {{ booking.check_out|date:"M d, Y" }}
                </p>
                
                <p class="mb-1">
                    <i class="fas fa-moon"></i>
                    <strong>{{ booking.num_nights }} night{{ booking.num_nights|pluralize }}</strong> Â· 
                    <i class="fas fa-users"></i>
                    {{ booking.guests }} guest{{ booking.guests|pluralize }}
                </p>
                
                <p class="mb-0 small text-muted">
                    <i class="fas fa-clock"></i>
                    Booked on {{ booking.created_at|date:"M d, Y" }}
                </p>
            </div>
            
            <div class="col-md-3 text-end">
                <span class="badge mb-2
                    {% if booking.status == 'confirmed' %}bg-success
                    {% elif booking.status == 'pending' %}bg-warning text-dark
                    {% elif booking.status == 'cancelled' %}bg-secondary
                    {% elif booking.status == 'completed' %}bg-primary
                    {% endif %}">
                    {{ booking.get_status_display|upper }}
                </span>
                
                <h4 class="text-danger mb-3">${{ booking.total_price|floatformat:2 }}</h4>
                
                <div class="d-grid gap-2">
                    <a href="{% url 'booking_detail' booking.pk %}" 
                       class="btn btn-outline-danger btn-sm">
                        <i class="fas fa-eye"></i> View Details
                    </a>
                    
                    {% if user == booking.guest and booking.status in 'pending,confirmed' and booking.is_upcoming %}
                        <a href="{% url 'cancel_booking' booking.pk %}" 
                           class="btn btn-outline-secondary btn-sm"
                           onclick="return confirm('Are you sure you want to cancel this booking?')">
                            <i class="fas fa-times"></i> Cancel
                        </a>
                    {% endif %}
                    
                    {% if booking.status == 'completed' and user == booking.guest and not booking.review %}
                        <a href="{% url 'create_review' booking.pk %}" 
                           class="btn btn-primary btn-sm">
                            <i class="fas fa-star"></i> Review
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>